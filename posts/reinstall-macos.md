---
title: Переустановка macOS Big Sur (на MacBook с M1)
description: Рассказываю, что не надо делать с новым макбуком, чтобы его не сломать
date: 2021-01-26
layout: layouts/post-layout.njk
tags: ['post']
---
<!-- Excerpt Start -->
Когда что-то идёт критически не так, как вы хотели, вы идёте переустанавливать операционную систему.
<!-- Excerpt End -->

Ну так принято, что ли, если что-то не так, снеси и поставь по-нормальному. Выйди и войди как положено. Есть даже мем такой: «Переустанови ШINDOWS!!!»

Раньше это была совершенно нормальная штука. У всех был Windows 95 – 7 (ну не любило большинство пользователей «восьмёрку», поэтому на неё переустанавливали очень редко), если что-то шло не так, в руки брался диск (ну или флешка) с нужным дистрибутивом, компьютер запускался в BIOS, и люди шли пить чай. С Linux (я тут говорю сейчас про домашние версии: Ubuntu, Debian, Mint — или чего-то подобного с графическим установщиком) всё было то же самое. Более того, регулярное обновление, которое происходит раз в полгода, люди до сих пор рекомендуют делать через «чистую установку». В среде «маководов» поверье, что снеся диск к чертям и установив систему с нуля вы получите стабильную сборку, тоже существует.

В принципе, это почти единственная причина, почему вам требуется заходить в область восстановления на своём маке и пробовать переустановить систему.

Другая причина: компьютер сам просит зайти туда и всё сделать нормально.

Я не знаю, что привело меня к такой необходимости. Кажется я что-то наковырял в терминале через Rosetta 2, но руки у меня неспокойные, лезут куда не просят, так что не удивительно. С вами такого точно не произойдёт.

Но если произошло, вот моя история.

## Вы бета-тестер. Смиритесь

Самая главная проблема, про которую вам не напишут восхищённые блогеры и обзорщики новых макбуков: **Apple сама не знает, что может произойти**. Если вы зайдёте в раздел технической поддержки на сайте компании и вдруг найдёте инструкцию для вашего компьютера на M1, она будет содержать фразу:

> «Следующие шаги применимы только к компьютерам Mac с процессором Intel. Если у вас компьютер Mac с процессором Apple, зависающий на этом экране, обратитесь в службу поддержки Apple».

И вы понимаете, что если у вас закончилась ограниченная годичная гарантия или AppleCare+, то вы не получите (на данный момент) решения вашей проблемы. Хотя, учитывая дату выхода новых компьютеров, этого не могло произойти.

## Как вы переустанавливаете систему?

### Windows

1. Вы входите в BIOS, зажимая при загрузке Del, F2 или F11, в зависимости от того, какая материнская плата установлена на компьютере (или открываете соответствующее меню для загрузки с другого носителя).
2. Запускаете образ операционной системы и в любом порядке:
    - Форматируете жёсткий диск
    - Устанавливаете операционную систему

### Linux (большинство современных дистрибутивов с GUI-установщиком)

Тут вы делаете так же как на Windows-машине.

## Дисклеймер

Пожалуйста, не совершайте ошибок автора, чтобы не столкнуться с подобным.

Заранее подготовьте загрузочную флешку с дистрибутивом. **Не стоит надеяться на средство восстановления.**

И **ни в коем случае не занимайтесь всем этим в выходные**. Техподдержка у Apple работает только по будням в рабочие часы. Вдруг она вам понадобится.

## Что произошло у меня

Как известно, BIOS на Mac в привычном понимании отсутствует, есть **система восстановления**, и **запускается** она не при помощи традиционного сочетания для Mac: Command (⌘) и R — а **долгим нажатием на клавишу включения**.

Окей, вы там.

**Теперь ни в коем случае не заходите в дисковую утилиту и не форматируйте жёсткий диск в ноль!**

Если это произойдёт, то при следующей попытке установить систему, например при помощи иконки в той же самой системе восстановления, вам будет отказано в доступе, потому что компьютер просто не найдёт учётную запись, которая обладает правами администратора (естественно, вы же всё стёрли). Вот главное отличие от Windows и Linux-машин.

И даже нажать на «Переустановить macOS» нельзя, потому что система попытается найти учётку, которой тоже нет. Тогда вы [заходите вот на эту страницу](https://support.apple.com/ru-ru/HT211983) из Safari, который на вашей машине ещё работает. Пытаетесь сделать всё по порядку, `resetpassword` вам не помогает, потому что пользователя нет. Затем вы копируете команды:

```bash
cd '/Volumes/Untitled'
mkdir -p private/tmp
cp -R '/Install macOS Big Sur.app' private/tmp
cd 'private/tmp/Install macOS Big Sur.app'
mkdir Contents/SharedSupport
curl -L -o Contents/SharedSupport/SharedSupport.dmg http://swcdn.apple.com/content/downloads/00/55/001-86606-A_9SF1TL01U7/5duug9lar1gypwunjfl96dza0upa854qgg/InstallAssistant.pkg
```

И начинается скачивание...

![](/imgs/reinstall-macos/image_1.jpg)

Затем оно прерывается с ошибкой...

![](/imgs/reinstall-macos/image_2.jpg)

Вот и всё! У вас нет прав на запись данных на диск. Смиритесь и ~~покупайте новый мак или~~ идите звоните в техническую поддержку Apple.

## Как я решал проблему?

Во-первых, я понял, что заранее не подготовил флешку с дитрибутивом и понадеялся на загрузчик в системе восстановления.

Во-вторых, я зашёл на страницу [Создание загружаемого установщика для macOS](https://support.apple.com/ru-ru/HT201372), там я увидел, что флешку можно создать при помощи работающего компьютера на macOS, а у меня как раз такой был: у родителей стоит мой старенький Mac mini (конца 2011) на macOS High Sierra 10.13. Тогда я поехал к спасительному компьютеру, чтобы понять: команд createinstallmedia — просто не сработала! Так же нельзя скачать установщик из App Store, потому что этот Mac mini просто не поддерживает нужную нам операционку (а на MacBook с M1 можно установить только Big Sur).

Вот тогда-то я и запаниковал. Снова перезагрузил компьютер в режиме восстановления и... нажал на «забыл пароль» (или какой-то аналогичный пункт меню, он будет первым до выбора самой системы восстановления, не пропустите). В итоге компьютер перезагрузился, вывел англоязычный интерфейс и предложил, войти в ваш аккаунт iCloud (потому что именно тут он обнаружил пользователя, которому принадлежит компьютер) и скачать macOS Big Sur без каких-либо проблем и установить систему с нуля.

Затем снова ввести пароль от iCloud и начать установку.

![](/imgs/reinstall-macos/image_3.jpg)

Уже затем вы можете выбрать нужный вам язык, если (к примеру) вы пользуетесь русскоязычным интерфейсом, установить раскладки и так далее.

## Вместо заключения

Да, тут можете сказать, что я сам себе злобный Буратино. Что не надо лазить куда не просят и так далее и тому подобное.

Можно упомянуть, что некоторое пространство с данными пользователя, так и останется недоступным для вас и храниться под защитой (на самом деле очень небольшое).

Можно сказать, что после такой переустановки компьютер вас сразу вспомнит, как и связку ключей (вы же зайдёте под пользователем с тем же Apple ID). Так что вы сможете просто продолжить работу.

А ещё можно обратить внимание, что Apple, продавая компьютеры на новом чипе, всё же замалчивает часть информации о том, что покупатель может остаться наедине со своей проблемой, ввиду отсутствия опыта других пользователей и инструкций на сайте производителя.
